<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wizinno.shuhao.device.domain.DeviceMapper">
  <resultMap id="BaseResultMap" type="com.wizinno.shuhao.device.domain.model.Device">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Nov 07 17:14:04 CST 2017.
    -->
    <id column="device_id" jdbcType="BIGINT" property="deviceId" />
    <result column="device_ver" jdbcType="VARCHAR" property="deviceVer" />
    <result column="sensor_count" jdbcType="INTEGER" property="sensorCount" />
    <result column="driver_count" jdbcType="INTEGER" property="driverCount" />
    <result column="io_cfg" jdbcType="VARCHAR" property="ioCfg" />
    <result column="sampling_period" jdbcType="INTEGER" property="samplingPeriod" />
    <result column="io_cfg_time" jdbcType="TIMESTAMP" property="ioCfgTime" />
    <result column="is_online" jdbcType="INTEGER" property="isOnline" />
    <result column="online_time" jdbcType="TIMESTAMP" property="onlineTime" />
    <result column="sinario_cfg" jdbcType="VARCHAR" property="sinarioCfg" />
    <result column="sinario_cfg_time" jdbcType="TIMESTAMP" property="sinarioCfgTime" />
    <result column="user_id" jdbcType="BIGINT" property="userId" />
    <result column="user_phone" jdbcType="VARCHAR" property="userPhone" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Nov 07 17:14:04 CST 2017.
    -->
    delete from device
    where device_id = #{deviceId,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.wizinno.shuhao.device.domain.model.Device">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Nov 07 17:14:04 CST 2017.
    -->
    insert into device (device_id, device_ver, sensor_count, 
      driver_count, io_cfg, sampling_period, 
      io_cfg_time, is_online, online_time, 
      sinario_cfg, sinario_cfg_time, user_id, 
      user_phone)
    values (#{deviceId,jdbcType=BIGINT}, #{deviceVer,jdbcType=VARCHAR}, #{sensorCount,jdbcType=INTEGER}, 
      #{driverCount,jdbcType=INTEGER}, #{ioCfg,jdbcType=VARCHAR}, #{samplingPeriod,jdbcType=INTEGER}, 
      #{ioCfgTime,jdbcType=TIMESTAMP}, #{isOnline,jdbcType=INTEGER}, #{onlineTime,jdbcType=TIMESTAMP}, 
      #{sinarioCfg,jdbcType=VARCHAR}, #{sinarioCfgTime,jdbcType=TIMESTAMP}, #{userId,jdbcType=BIGINT},
      #{userPhone,jdbcType=VARCHAR})
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.wizinno.shuhao.device.domain.model.Device">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Nov 07 17:14:04 CST 2017.
    -->
    update device
    set device_ver = #{deviceVer,jdbcType=VARCHAR},
      sensor_count = #{sensorCount,jdbcType=INTEGER},
      driver_count = #{driverCount,jdbcType=INTEGER},
      io_cfg = #{ioCfg,jdbcType=VARCHAR},
      sampling_period = #{samplingPeriod,jdbcType=INTEGER},
      io_cfg_time = #{ioCfgTime,jdbcType=TIMESTAMP},
      is_online = #{isOnline,jdbcType=INTEGER},
      online_time = #{onlineTime,jdbcType=TIMESTAMP},
      sinario_cfg = #{sinarioCfg,jdbcType=VARCHAR},
      sinario_cfg_time = #{sinarioCfgTime,jdbcType=TIMESTAMP},
      user_id = #{userId,jdbcType=BIGINT},
      user_phone = #{userPhone,jdbcType=VARCHAR}
    where device_id = #{deviceId,jdbcType=BIGINT}
  </update>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Nov 07 17:14:04 CST 2017.
    -->
    select device_id, device_ver, sensor_count, driver_count, io_cfg, sampling_period, 
    io_cfg_time, is_online, online_time, sinario_cfg, sinario_cfg_time, user_id, user_phone
    from device
    where device_id = #{deviceId,jdbcType=BIGINT}
  </select>
  <select id="isBindDevice" parameterType="java.lang.Long" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Nov 07 17:14:04 CST 2017.
    -->
    select device_id, device_ver, sensor_count, driver_count, io_cfg, sampling_period,
    io_cfg_time, is_online, online_time, sinario_cfg, sinario_cfg_time, user_id, user_phone
    from device
    where user_id = #{userId,jdbcType=BIGINT}
  </select>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Nov 07 17:14:04 CST 2017.
    -->
    select device_id, device_ver, sensor_count, driver_count, io_cfg, sampling_period, 
    io_cfg_time, is_online, online_time, sinario_cfg, sinario_cfg_time, user_id, user_phone
    from device
  </select>

  <select id="getDevices" resultMap="BaseResultMap" parameterType="com.wizinno.shuhao.condition.DeviceCondition">
        select device_id, device_ver, sensor_count, driver_count, io_cfg, sampling_period,
    io_cfg_time, is_online, online_time, sinario_cfg, sinario_cfg_time, user_id, user_phone
    from device
    <where>
      <if test="phone != null"> AND user_phone= #{phone,jdbcType=VARCHAR}</if>
      <if test="deviceId != null"> AND device_id= #{deviceId,jdbcType=VARCHAR}</if>
    </where>
    limit #{start,jdbcType=INTEGER}, #{size,jdbcType=INTEGER}
  </select>

  <select id="getDevicesTotal" parameterType="com.wizinno.shuhao.condition.DeviceCondition" resultType="java.lang.Long">
    select count(1)
    from device
    <where>
      <if test="phone != null"> AND user_phone= #{phone,jdbcType=VARCHAR}</if>
      <if test="deviceId != null"> AND device_id= #{deviceId,jdbcType=VARCHAR}</if>
    </where>

  </select>
</mapper>